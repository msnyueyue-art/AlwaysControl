<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êà∑Áî®ÂÆ∂Â∫≠ÂÇ®ËÉΩ-ËÉΩÊ∫êÁÆ°ÁêÜÁ≥ªÁªü</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
    <header class="header">
        <div class="header-left">
            <div class="logo">
                <img src="images/logo.png" alt="AlwaysControl" class="logo-image">
            </div>
            <div class="header-center">
                <div class="date-display">
                    <svg class="date-icon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                    </svg>
                    <span id="currentDate">2025/11/04</span>
                </div>
                <select class="language-selector">
                    <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                    <option value="en-US">English</option>
                </select>
            </div>
        </div>
        <div class="header-actions">
            <div class="action-item">
                <svg class="action-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M10 6v8M6 10h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <div class="action-text">Ê∑ªÂä†ËÆæÂ§á</div>
            </div>
            <div class="action-item">
                <svg class="action-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M10 2a6 6 0 0 0-6 6c0 3.5-1 5-1 5h14s-1-1.5-1-5a6 6 0 0 0-6-6z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8.5 17a1.5 1.5 0 0 0 3 0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <div class="action-text">‰ø°ÊÅØÈÄöÁü•</div>
            </div>
            <div class="action-item">
                <svg class="action-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M10 7v3l2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <div class="action-text">Êñ∞ÊâãÊïôÁ®ã</div>
            </div>
        </div>
    </header>

    <!-- ‰æßËæπÊ†è -->
    <nav class="sidebar">
        <div class="user-profile">
            <div class="user-avatar">üë§</div>
            <div class="user-name">user_demo</div>
        </div>
        <div class="nav-menu">
            <a href="index.html" class="nav-item active">
                <div class="nav-icon">üè†</div>
                <span>È¶ñÈ°µ</span>
            </a>
            <a href="historical-data.html" class="nav-item">
                <div class="nav-icon">üìä</div>
                <span>ÂéÜÂè≤Êï∞ÊçÆ</span>
            </a>
            <a href="message-center.html" class="nav-item">
                <div class="nav-icon">üîî</div>
                <span>Ê∂àÊÅØ‰∏≠ÂøÉ</span>
            </a>
            <a href="help-support.html" class="nav-item">
                <div class="nav-icon">‚ë°</div>
                <span>Â∏ÆÂä©‰∏éÊîØÊåÅ</span>
            </a>
            <a href="device-management.html" class="nav-item">
                <div class="nav-icon">üè¢</div>
                <span>ËÆæÂ§áÁÆ°ÁêÜ</span>
            </a>
            <a href="settings.html" class="nav-item">
                <div class="nav-icon">‚öôÔ∏è</div>
                <span>ËÆæÁΩÆ</span>
            </a>
        </div>
        <div class="logout-section">
            <span class="version-text">ÁâàÊú¨Âè∑ 1.0.12</span>
            <a href="login.html" class="logout-btn" title="ÈÄÄÂá∫ÁôªÂΩï">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                    <polyline points="16 17 21 12 16 7"/>
                    <line x1="21" y1="12" x2="9" y2="12"/>
                </svg>
            </a>
        </div>
    </nav>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
    <main class="main-content">
        <!-- È°∂ÈÉ®Â∑•‰ΩúÊ®°ÂºèÊòæÁ§∫ -->
        <div class="work-mode-header">
            <div class="work-mode-card">
                <span class="work-mode-label">ÂΩìÂâçÂ∑•‰ΩúÊ®°Âºè</span>
                <span class="work-mode-badge">Ëá™ÂèëËá™Áî®</span>
            </div>
        </div>

        <!-- ‰∏≠Â§ÆÂ∏ÉÂ±ÄÔºöÊàøÂ≠êÂú®‰∏≠Â§ÆÔºåÂ∑¶Âè≥‰∏§‰æßÊòØ‰ø°ÊÅØÂç°Áâá -->
        <div class="central-layout">
            <!-- Â∑¶‰æß‰ø°ÊÅØÂç°Áâá -->
            <div class="left-panels">
                <!-- ÂÖâ‰ºèÈù¢Êùø -->
                <div class="data-panel" data-panel="pv">
                    <div class="panel-header">
                        <div class="panel-title">ÂÖâ‰ºè</div>
                        <div class="status-indicator status-online">
                            <span class="status-dot"></span>
                            Âú®Á∫ø
                        </div>
                    </div>
                    <div class="panel-main-value">
                        <div class="main-value-number">7.13<span class="main-value-unit">kw</span></div>
                    </div>
                    <div class="panel-detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">ÂäüÁéá1</div>
                            <div class="detail-value">3.21kW</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÁîµÂéã1</div>
                            <div class="detail-value">400.41V</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÁîµÊµÅ1</div>
                            <div class="detail-value">8.01A</div>
                        </div>
                    </div>
                </div>

                <!-- ÁîµÁΩëÈù¢Êùø -->
                <div class="data-panel" data-panel="grid">
                    <div class="panel-header">
                        <div class="panel-title">ÁîµÁΩë</div>
                        <div class="status-indicator status-online">
                            <span class="status-dot"></span>
                            Âú®Á∫ø
                        </div>
                    </div>
                    <div class="panel-main-value">
                        <div class="main-value-number">0.00<span class="main-value-unit">kw</span></div>
                    </div>
                    <div class="panel-detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">ÂäüÁéá</div>
                            <div class="detail-value">0.00kW</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÁîµÂéã</div>
                            <div class="detail-value">232.26V</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÁîµÊµÅ</div>
                            <div class="detail-value">0.00A</div>
                        </div>
                    </div>
                </div>

                <!-- ÂÖÖÁîµÊ°©Èù¢Êùø -->
                <div class="data-panel" data-panel="charging">
                    <div class="panel-header">
                        <div class="panel-title">ÂÖÖÁîµÊ°©</div>
                        <div class="status-indicator status-online">
                            <span class="status-dot"></span>
                            Âú®Á∫ø
                        </div>
                    </div>
                    <div class="panel-main-value">
                        <div class="main-value-number">2.52<span class="main-value-unit">kw</span></div>
                    </div>
                    <div class="panel-detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">ÂäüÁéá1</div>
                            <div class="detail-value">2.52kW</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÁîµÂéã1</div>
                            <div class="detail-value">232.25V</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ‰∏≠Â§Æ3DÊàøÂ±ãÂ±ïÁ§∫Âå∫Âüü -->
            <div class="center-house">
                <div class="house-container">
                    <!-- 3DÊàøÂ±ãÊ®°ÂûãÂõæÁâáÂÆπÂô® -->
                    <div class="house-model">
                        <img src="images/house-model.png" alt="3D House Model" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                </div>
            </div>

            <!-- Âè≥‰æß‰ø°ÊÅØÂç°Áâá -->
            <div class="right-panels">
                <!-- ÂÆ∂Â∫≠Ë¥üËΩΩÈù¢Êùø -->
                <div class="data-panel" data-panel="load">
                    <div class="panel-header">
                        <div class="panel-title">ÂÆ∂Â∫≠Ë¥üËΩΩ</div>
                        <div class="status-indicator status-online">
                            <span class="status-dot"></span>
                            Âú®Á∫ø
                        </div>
                    </div>
                    <div class="panel-main-value">
                        <div class="main-value-number">2.78<span class="main-value-unit">kw</span></div>
                    </div>
                    <div class="panel-detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">ÂÖ≥ÈîÆË¥üËΩΩ</div>
                            <div class="detail-value">1.21kW</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÂÖ≥ÈîÆÁîµÂéã</div>
                            <div class="detail-value">232.22V</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÊôÆÈÄöË¥üËΩΩ</div>
                            <div class="detail-value">1.57kW</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÊôÆÈÄöÁîµÂéã</div>
                            <div class="detail-value">232.26V</div>
                        </div>
                    </div>
                </div>

                <!-- ÁîµÊ±†Èù¢Êùø -->
                <div class="data-panel" data-panel="battery">
                    <div class="panel-header">
                        <div class="panel-title">ÁîµÊ±†</div>
                        <div class="status-indicator status-online">
                            <span class="status-dot"></span>
                            Âú®Á∫ø
                        </div>
                    </div>
                    <div class="panel-main-value">
                        <div class="main-value-number">1.83<span class="main-value-unit">kw(ÂÖÖÁîµ)</span></div>
                    </div>
                    <div class="panel-detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">ÂäüÁéá</div>
                            <div class="detail-value">1.83kW</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÁîµÂéã</div>
                            <div class="detail-value">57.08V</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÁîµÈáè(SOC)</div>
                            <div class="detail-value">32%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÁîµÊ±†ÂÅ•Â∫∑Â∫¶(SOH)</div>
                            <div class="detail-value">100%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Âπ≥ÂùáÊ∏©Â∫¶</div>
                            <div class="detail-value">23¬∞C</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ëá™ÂèëËá™Áî®Áéá -->
        <div class="data-panel">
            <div class="panel-header">
                <div class="panel-title">Ëá™ÂèëËá™Áî®Áéá</div>
            </div>
            <div class="usage-rate-container">
                <div class="usage-rate-table">
                    <table class="usage-table">
                        <thead>
                            <tr>
                                <th></th>
                                <th>ÂÖâ‰ºè‰æõÁîµÈáè</th>
                                <th>ÁôæÂàÜÊØî</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="color-dot" style="background: #fadb14;"></span>ÁîµÊ±†</td>
                                <td>12.94 kWh</td>
                                <td>22.62%</td>
                            </tr>
                            <tr>
                                <td><span class="color-dot" style="background: #52c41a;"></span>ÂÆ∂Â∫≠ÊÄªË¥üËΩΩ</td>
                                <td>26.44 kWh</td>
                                <td>46.21%</td>
                            </tr>
                            <tr>
                                <td><span class="color-dot" style="background: #1890ff;"></span>ÂÖÖÁîµÊ°©</td>
                                <td>17.83 kWh</td>
                                <td>31.17%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="usage-rate-chart">
                    <div id="pieChart" class="pie-chart-wrapper"></div>
                </div>
            </div>
        </div>

        <!-- ‰ªäÊó•Êï∞ÊçÆÁªüËÆ° -->
        <div class="data-panel">
            <div class="panel-header">
                <div class="panel-title">‰ªäÊó•Êï∞ÊçÆ</div>
            </div>
            <div class="today-stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #ffd666 0%, #faad14 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="5" stroke="white" stroke-width="2"/>
                            <path d="M12 2v2M12 20v2M2 12h2M20 12h2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">‰ªäÊó•ÂèëÁîµÈáè</div>
                        <div class="stat-value">29.098 <span class="stat-unit">kWh</span></div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #95de64 0%, #73d13d 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">ÂçñÁîµÊî∂Áõä</div>
                        <div class="stat-value">--</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #69c0ff 0%, #1890ff 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M19 7h-3V4H8v3H5v13h14V7zM9 18H7v-2h2v2zm0-4H7v-2h2v2zm0-4H7V8h2v2zm4 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V8h2v2zm4 8h-2v-2h2v2zm0-4h-2v-2h2v2z" fill="white"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Â∑≤‰∏∫‰Ω†ËäÇÁúÅ</div>
                        <div class="stat-value">79.01 <span class="stat-unit">¬•</span></div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #87e8de 0%, #13c2c2 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L9 9l-7 .5 5.5 5L6 22l6-3.5L18 22l-1.5-7.5L22 9.5 15 9l-3-7z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">ÂáèÂ∞ëÁ¢≥Ë∂≥Ëøπ</div>
                        <div class="stat-value">29.011 <span class="stat-unit">kg</span></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/common.js"></script>
    <script>
        // Êõ¥Êñ∞ÂΩìÂâçÊó•Êúü
        function updateCurrentDate() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const dateStr = `${year}/${month}/${day}`;
            const dateElement = document.getElementById('currentDate');
            if (dateElement) {
                dateElement.textContent = dateStr;
            }
        }

        // ÂàùÂßãÂåñÈ•ºÂõæ
        document.addEventListener('DOMContentLoaded', function() {
            // Êõ¥Êñ∞Êó•Êúü
            updateCurrentDate();

            // ÂàùÂßãÂåñÈ•ºÂõæÊï∞ÊçÆ
            const pieData = [
                { label: 'ÂÖÖÁîµÊ°©', value: 31.17, color: '#1890ff' },
                { label: 'ÁîµÊ±†', value: 22.62, color: '#fadb14' },
                { label: 'ÂÆ∂Â∫≠Ë¥üËΩΩ', value: 46.21, color: '#52c41a' }
            ];

            // Ê£ÄÊü•ChartManagerÊòØÂê¶Â≠òÂú®
            if (typeof ChartManager !== 'undefined') {
                ChartManager.init('pieChart');
                ChartManager.drawPieChart('pieChart', pieData);
            } else {
                // ÁÆÄÂçïÁöÑSVGÈ•ºÂõæ
                const pieContainer = document.getElementById('pieChart');
                if (pieContainer) {
                    let total = pieData.reduce((sum, item) => sum + item.value, 0);
                    let currentAngle = 0;
                    let svgPaths = '';

                    pieData.forEach(item => {
                        const percentage = item.value / total;
                        const angle = percentage * 360;
                        const largeArcFlag = angle > 180 ? 1 : 0;

                        const startAngle = (currentAngle - 90) * Math.PI / 180;
                        const endAngle = (currentAngle + angle - 90) * Math.PI / 180;

                        const x1 = 100 + 80 * Math.cos(startAngle);
                        const y1 = 100 + 80 * Math.sin(startAngle);
                        const x2 = 100 + 80 * Math.cos(endAngle);
                        const y2 = 100 + 80 * Math.sin(endAngle);

                        svgPaths += `<path d="M100,100 L${x1},${y1} A80,80 0 ${largeArcFlag},1 ${x2},${y2} Z" fill="${item.color}" opacity="0.85"/>`;

                        currentAngle += angle;
                    });

                    pieContainer.innerHTML = `
                        <svg viewBox="0 0 200 200" style="width: 100%; height: 100%;">
                            ${svgPaths}
                            <circle cx="100" cy="100" r="45" fill="white"/>
                            <text x="100" y="95" text-anchor="middle" font-size="14" fill="#666" font-weight="500">Ëá™Áî®Áéá</text>
                            <text x="100" y="115" text-anchor="middle" font-size="20" fill="#333" font-weight="700">100%</text>
                        </svg>
                    `;
                }
            }
        });
    </script>
</body>
</html>
