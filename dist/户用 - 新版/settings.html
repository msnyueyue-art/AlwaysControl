<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¾ç½® - æˆ·ç”¨å®¶åº­å‚¨èƒ½-èƒ½æºç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="header">
        <div class="logo">Always Control Technology</div>
        <div class="header-center">
            <div class="date-display">2025/09/23</div>
            <select class="language-selector">
                <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                <option value="en-US">English</option>
            </select>
        </div>
        <div class="header-actions">
            <div class="action-item">
                <div class="action-icon">+</div>
                <div class="action-text">æ·»åŠ è®¾å¤‡</div>
            </div>
            <div class="action-item">
                <div class="action-icon">ğŸ””</div>
                <div class="action-text">ä¿¡æ¯é€šçŸ¥</div>
            </div>
            <div class="action-item">
                <div class="action-icon">ğŸ“–</div>
                <div class="action-text">æ–°æ‰‹æ•™ç¨‹</div>
            </div>
        </div>
    </header>

    <!-- ä¾§è¾¹æ  -->
    <nav class="sidebar">
        <div class="user-profile">
            <div class="user-avatar">ğŸ‘¤</div>
            <div class="user-name">user_demo</div>
        </div>
        <div class="nav-menu">
            <a href="index.html" class="nav-item">
                <div class="nav-icon">ğŸ </div>
                <span>é¦–é¡µ</span>
            </a>
            <a href="historical-data.html" class="nav-item">
                <div class="nav-icon">ğŸ“Š</div>
                <span>å†å²æ•°æ®</span>
            </a>
            <a href="message-center.html" class="nav-item">
                <div class="nav-icon">ğŸ””</div>
                <span>æ¶ˆæ¯ä¸­å¿ƒ</span>
            </a>
            <a href="help-support.html" class="nav-item">
                <div class="nav-icon">â“</div>
                <span>å¸®åŠ©ä¸æ”¯æŒ</span>
            </a>
            <a href="device-management.html" class="nav-item">
                <div class="nav-icon">ğŸ¢</div>
                <span>è®¾å¤‡ç®¡ç†</span>
            </a>
            <a href="settings.html" class="nav-item active">
                <div class="nav-icon">âš™ï¸</div>
                <span>è®¾ç½®</span>
            </a>
        </div>
        <div class="version-info">
            <span>ç‰ˆæœ¬å· 1.0.12</span>
            <span>â–¼</span>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
        <!-- ç»ˆç«¯IDæ˜¾ç¤º -->
        <div style="background: #fff; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);">
            <h2 style="font-size: 18px; font-weight: 600; color: #333; margin-bottom: 16px;">EN09774600-9961FT</h2>
        </div>

        <!-- å·¥ä½œæ¨¡å¼è®¾ç½® -->
        <div class="data-panel">
            <div class="panel-header">
                <div class="panel-title">
                    <span>å·¥ä½œæ¨¡å¼</span>
                </div>
            </div>
            
            <!-- å®¶åº­æœ€å¤§è¾“å…¥ç”µæµè®¾ç½® -->
            <div style="margin-bottom: 30px;">
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 8px;">
                    <span style="font-size: 16px; font-weight: 500; color: #333;">å®¶åº­æœ€å¤§è¾“å…¥ç”µæµ</span>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <button class="btn btn-secondary" onclick="adjustInputCurrent(-1)" style="padding: 4px 8px;">-</button>
                        <input type="number" id="inputCurrent" value="32" min="6" max="32" style="width: 80px; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px; text-align: center; font-size: 16px; font-weight: 600;">
                        <button class="btn btn-secondary" onclick="adjustInputCurrent(1)" style="padding: 4px 8px;">+</button>
                        <span style="font-size: 16px; color: #666;">A</span>
                    </div>
                </div>
                <div style="font-size: 14px; color: #666;">å¯è®¾ç½®èŒƒå›´: 6~32A</div>
            </div>

            <!-- å·¥ä½œæ¨¡å¼é€‰æ‹© -->
            <div style="margin-bottom: 30px;">
                <h3 style="font-size: 16px; font-weight: 600; color: #333; margin-bottom: 16px;">å·¥ä½œæ¨¡å¼</h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                    <div class="mode-card active" data-mode="self_consumption">
                        <div class="mode-icon">ğŸ âš¡</div>
                        <div class="mode-title">è‡ªå‘è‡ªç”¨</div>
                        <div class="mode-check">âœ“</div>
                    </div>
                    <div class="mode-card" data-mode="economic">
                        <div class="mode-icon">âš¡</div>
                        <div class="mode-title">ç»æµæ¨¡å¼</div>
                        <div class="mode-check">âœ“</div>
                    </div>
                    <div class="mode-card" data-mode="emergency">
                        <div class="mode-icon">âš ï¸</div>
                        <div class="mode-title">åº”æ€¥æ¨¡å¼</div>
                        <div class="mode-check">âœ“</div>
                    </div>
                </div>
                <div style="margin-top: 16px; padding: 16px; background: #f6ffed; border: 1px solid #b7eb8f; border-radius: 6px; color: #666; line-height: 1.6;">
                    é€‰æ‹©è‡ªå‘è‡ªç”¨æ¨¡å¼å, ä¼šæœ€å¤§åˆ©ç”¨å…‰ä¼å‘çš„ç”µç»™å®¶åº­ä½¿ç”¨ã€‚ä¸€èˆ¬å¸¦æœ‰å…‰ä¼çš„å®¶åº­ä¼šé€‰æ‹©è¿™ä¸ªæ¨¡å¼ã€‚
                </div>
            </div>
        </div>

        <!-- ç”µæ± è®¾ç½® -->
        <div class="data-panel">
            <div class="panel-header">
                <div class="panel-title">
                    <div class="panel-icon" style="background: #52c41a;">ğŸ”‹</div>
                    <span>ç”µæ± </span>
                </div>
            </div>

            <!-- æ˜¯å¦å…è®¸ç”µç½‘å……ç”µ -->
            <div style="margin-bottom: 30px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                    <span style="font-size: 16px; font-weight: 500; color: #333;">æ˜¯å¦å…è®¸ç”µç½‘å……ç”µ</span>
                    <label class="switch">
                        <input type="checkbox" id="gridCharging">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <!-- è®¾ç½®ç”¨ç”µå¤‡ä»½ -->
            <div style="margin-bottom: 30px;">
                <h3 style="font-size: 16px; font-weight: 600; color: #333; margin-bottom: 16px;">è®¾ç½®ç”¨ç”µå¤‡ä»½</h3>
                <div style="background: #f6ffed; border: 1px solid #b7eb8f; border-radius: 6px; padding: 16px; margin-bottom: 20px; color: #666; line-height: 1.6;">
                    æŒ‡çš„æ˜¯ç”µç½‘ä¸­æ–­å¤‡ç”¨èƒ½æºçš„SOC, ç›¸å½“äºæœ€å°‘xx%ç”µå­˜åœ¨ç”µæ± å†…éƒ¨, å…¶ä½™ç”¨äºç»æµã€è‡ªå‘è‡ªç”¨æ¨¡å¼ã€‚å¦‚æœæ‚¨å¸Œæœ›åœ¨ç”µç½‘åœç”µæœŸé—´ä¿ç•™æ›´å¤šèƒ½æºä½¿ç”¨, æˆ–è€…æ‚¨æ‰€åœ¨çš„åœ°åŒºæ›´å®¹æ˜“å‘ç”Ÿåœç”µ, æ‚¨å¯ä»¥è®¾ç½®æ›´é«˜çš„å‚¨å¤‡ç™¾åˆ†æ¯”ã€‚å¦‚æœæ‚¨å¸Œæœ›åœ¨è‡ªå‘è‡ªç”¨æˆ–ç»æµæ¨¡å¼ä¸‹ä¼˜åŒ–ç”µæ± çš„æ€§èƒ½, æ‚¨å¯ä»¥è®¾ç½®è¾ƒä½çš„å‚¨å¤‡ç™¾åˆ†æ¯”ã€‚
                </div>
                
                <!-- å¤‡ä»½ç™¾åˆ†æ¯”æ»‘å— -->
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <div>
                            <div style="font-size: 18px; font-weight: 600; color: #1890ff;">23%</div>
                            <div style="font-size: 14px; color: #666;">ç”µç½‘åœç”µå¤‡ç”¨èƒ½æº</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 18px; font-weight: 600; color: #666;">77%</div>
                            <div style="font-size: 14px; color: #666;">ç”¨äºè‡ªä¾›ç”µ</div>
                        </div>
                    </div>
                    <div style="position: relative;">
                        <input type="range" id="backupSlider" min="0" max="100" value="23" class="slider-range" style="width: 100%;">
                        <div style="position: absolute; top: -25px; left: 23%; transform: translateX(-50%); font-size: 12px; color: #1890ff; font-weight: 600;">23%</div>
                    </div>
                </div>
            </div>

            <!-- ç”µæ± å……ç”µç”µæµ -->
            <div style="margin-bottom: 20px;">
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 8px;">
                    <span style="font-size: 16px; font-weight: 500; color: #333;">ç”µæ± å……ç”µç”µæµ</span>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <button class="btn btn-secondary" onclick="adjustBatteryCurrent(-5)" style="padding: 4px 8px;">-</button>
                        <input type="number" id="batteryCurrent" value="80" min="5" max="100" style="width: 80px; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px; text-align: center; font-size: 16px; font-weight: 600;">
                        <button class="btn btn-secondary" onclick="adjustBatteryCurrent(5)" style="padding: 4px 8px;">+</button>
                        <span style="font-size: 16px; color: #666;">A</span>
                    </div>
                </div>
                <div style="font-size: 14px; color: #666;">å¯è®¾ç½®èŒƒå›´: 5~100A</div>
            </div>
        </div>

        <!-- å……ç”µæ¡©è®¾ç½® -->
        <div class="data-panel">
            <div class="panel-header">
                <div class="panel-title">
                    <div class="panel-icon" style="background: #faad14;">ğŸš—</div>
                    <span>å……ç”µæ¡©</span>
                </div>
            </div>

            <!-- æœ€å¤§å……ç”µåŠŸç‡è®¾ç½® -->
            <div style="margin-bottom: 30px;">
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 8px;">
                    <span style="font-size: 16px; font-weight: 500; color: #333;">æœ€å¤§å……ç”µåŠŸç‡è®¾ç½®</span>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <button class="btn btn-secondary" onclick="adjustChargingPower(-1000)" style="padding: 4px 8px;">-</button>
                        <input type="number" id="chargingPower" value="25000" min="6000" max="30000" step="1000" style="width: 120px; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px; text-align: center; font-size: 16px; font-weight: 600;">
                        <button class="btn btn-secondary" onclick="adjustChargingPower(1000)" style="padding: 4px 8px;">+</button>
                        <span style="font-size: 16px; color: #666;">W</span>
                    </div>
                </div>
                <div style="font-size: 14px; color: #666;">å¯è®¾ç½®èŒƒå›´: 6000~30000W</div>
            </div>

            <!-- å……ç”µæ¨¡å¼ -->
            <div style="margin-bottom: 20px;">
                <h3 style="font-size: 16px; font-weight: 600; color: #333; margin-bottom: 16px;">å……ç”µæ¨¡å¼</h3>
                <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                    <button class="charging-mode-btn active" data-mode="plug_charge">å³æ’å³å……</button>
                    <button class="charging-mode-btn" data-mode="scheduled">é¢„çº¦å……ç”µ</button>
                    <button class="charging-mode-btn" data-mode="pv_charging">å…‰ä¼å……ç”µ</button>
                </div>
                <div style="padding: 16px; background: #e6f7ff; border: 1px solid #91d5ff; border-radius: 6px; color: #666;">
                    å……ç”µæªæ’å…¥ç”µè½¦å³å¼€å§‹å……ç”µ
                </div>
            </div>
        </div>

        <!-- ç”µç½‘è®¾ç½® -->
        <div class="data-panel">
            <div class="panel-header">
                <div class="panel-title">
                    <div class="panel-icon" style="background: #1890ff;">âš¡</div>
                    <span>ç”µç½‘</span>
                </div>
            </div>

            <!-- å¸ç§é€‰æ‹© -->
            <div style="margin-bottom: 30px;">
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 8px;">
                    <span style="font-size: 16px; font-weight: 500; color: #333;">å¸ç§</span>
                    <select style="padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; background: #fff;">
                        <option>äººæ°‘å¸</option>
                        <option>ç¾å…ƒ</option>
                        <option>æ¬§å…ƒ</option>
                    </select>
                </div>
            </div>

            <!-- ä»·æ ¼è®¾ç½® -->
            <div style="margin-bottom: 30px;">
                <h3 style="font-size: 16px; font-weight: 600; color: #333; margin-bottom: 16px;">ä»·æ ¼è®¾ç½®</h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                    <!-- é«˜ç”µä»· -->
                    <div class="price-setting">
                        <div style="background: #ff4d4f; color: white; padding: 8px 12px; border-radius: 6px 6px 0 0; text-align: center; font-weight: 600;">é«˜ç”µä»·</div>
                        <div style="padding: 16px; border: 1px solid #ff4d4f; border-top: none; border-radius: 0 0 6px 6px;">
                            <div style="margin-bottom: 12px;">
                                <label style="display: block; margin-bottom: 4px; font-size: 14px; color: #666;">ä¹°å…¥ä»·</label>
                                <input type="number" value="3" style="width: 100%; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 4px; font-size: 14px; color: #666;">å–å‡ºä»·</label>
                                <input type="number" value="2" style="width: 100%; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px;">
                            </div>
                        </div>
                    </div>

                    <!-- å¹³ç”µä»· -->
                    <div class="price-setting">
                        <div style="background: #faad14; color: white; padding: 8px 12px; border-radius: 6px 6px 0 0; text-align: center; font-weight: 600;">å¹³ç”µä»·</div>
                        <div style="padding: 16px; border: 1px solid #faad14; border-top: none; border-radius: 0 0 6px 6px;">
                            <div style="margin-bottom: 12px;">
                                <label style="display: block; margin-bottom: 4px; font-size: 14px; color: #666;">ä¹°å…¥ä»·</label>
                                <input type="number" value="2" style="width: 100%; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 4px; font-size: 14px; color: #666;">å–å‡ºä»·</label>
                                <input type="number" value="1" style="width: 100%; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px;">
                            </div>
                        </div>
                    </div>

                    <!-- ä½ç”µä»· -->
                    <div class="price-setting">
                        <div style="background: #52c41a; color: white; padding: 8px 12px; border-radius: 6px 6px 0 0; text-align: center; font-weight: 600;">ä½ç”µä»·</div>
                        <div style="padding: 16px; border: 1px solid #52c41a; border-top: none; border-radius: 0 0 6px 6px;">
                            <div style="margin-bottom: 12px;">
                                <label style="display: block; margin-bottom: 4px; font-size: 14px; color: #666;">ä¹°å…¥ä»·</label>
                                <input type="number" value="1" style="width: 100%; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 4px; font-size: 14px; color: #666;">å–å‡ºä»·</label>
                                <input type="number" value="1" style="width: 100%; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ—¶é—´æ®µè®¾ç½® -->
            <div>
                <h3 style="font-size: 16px; font-weight: 600; color: #333; margin-bottom: 16px;">æ—¶é—´æ®µè®¾ç½®</h3>
                <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                    <button class="time-period-btn active" data-period="high">è®¾ç½®é«˜ç”µä»·æ—¶é—´æ®µ</button>
                    <button class="time-period-btn" data-period="normal">è®¾ç½®å¹³ç”µä»·æ—¶é—´æ®µ</button>
                    <button class="time-period-btn" data-period="low">è®¾ç½®ä½ç”µä»·æ—¶é—´æ®µ</button>
                </div>
                
                <!-- 24å°æ—¶æ—¶é—´å— -->
                <div style="display: grid; grid-template-columns: repeat(12, 1fr); gap: 4px;">
                    <!-- ç¬¬ä¸€è¡Œ (0-11ç‚¹) -->
                    <div class="time-block low" data-hour="1">1<br>00:00~01:00</div>
                    <div class="time-block low" data-hour="2">2<br>01:00~02:00</div>
                    <div class="time-block low" data-hour="3">3<br>02:00~03:00</div>
                    <div class="time-block low" data-hour="4">4<br>03:00~04:00</div>
                    <div class="time-block low" data-hour="5">5<br>04:00~05:00</div>
                    <div class="time-block low" data-hour="6">6<br>05:00~06:00</div>
                    <div class="time-block normal" data-hour="7">7<br>06:00~07:00</div>
                    <div class="time-block normal" data-hour="8">8<br>07:00~08:00</div>
                    <div class="time-block low" data-hour="9">9<br>08:00~09:00</div>
                    <div class="time-block low" data-hour="10">10<br>09:00~10:00</div>
                    <div class="time-block low" data-hour="11">11<br>10:00~11:00</div>
                    <div class="time-block low" data-hour="12">12<br>11:00~12:00</div>
                    
                    <!-- ç¬¬äºŒè¡Œ (12-23ç‚¹) -->
                    <div class="time-block normal" data-hour="13">13<br>12:00~13:00</div>
                    <div class="time-block normal" data-hour="14">14<br>13:00~14:00</div>
                    <div class="time-block normal" data-hour="15">15<br>14:00~15:00</div>
                    <div class="time-block normal" data-hour="16">16<br>15:00~16:00</div>
                    <div class="time-block low" data-hour="17">17<br>16:00~17:00</div>
                    <div class="time-block low" data-hour="18">18<br>17:00~18:00</div>
                    <div class="time-block low" data-hour="19">19<br>18:00~19:00</div>
                    <div class="time-block low" data-hour="20">20<br>19:00~20:00</div>
                    <div class="time-block normal" data-hour="21">21<br>20:00~21:00</div>
                    <div class="time-block normal" data-hour="22">22<br>21:00~22:00</div>
                    <div class="time-block normal" data-hour="23">23<br>22:00~23:00</div>
                    <div class="time-block normal" data-hour="24">24<br>23:00~24:00</div>
                </div>
            </div>
        </div>
    </main>

    <style>
        /* æ¨¡å¼å¡ç‰‡æ ·å¼ */
        .mode-card {
            background: #fff;
            border: 2px solid #f0f0f0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .mode-card:hover {
            border-color: #1890ff;
        }

        .mode-card.active {
            border-color: #1890ff;
            background: #e6f7ff;
        }

        .mode-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .mode-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .mode-check {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 24px;
            height: 24px;
            background: #1890ff;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .mode-card.active .mode-check {
            opacity: 1;
        }

        /* å……ç”µæ¨¡å¼æŒ‰é’®æ ·å¼ */
        .charging-mode-btn {
            padding: 12px 20px;
            border: 2px solid #f0f0f0;
            background: #fff;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 500;
        }

        .charging-mode-btn:hover {
            border-color: #1890ff;
        }

        .charging-mode-btn.active {
            border-color: #1890ff;
            background: #e6f7ff;
            color: #1890ff;
        }

        /* æ—¶é—´æ®µæŒ‰é’®æ ·å¼ */
        .time-period-btn {
            padding: 12px 20px;
            border: 2px solid #f0f0f0;
            background: #fff;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 500;
        }

        .time-period-btn:hover {
            border-color: #1890ff;
        }

        .time-period-btn.active {
            border-color: #1890ff;
            background: #e6f7ff;
            color: #1890ff;
        }

        /* æ—¶é—´å—æ ·å¼ */
        .time-block {
            padding: 12px 8px;
            border: 1px solid #d9d9d9;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
            line-height: 1.3;
        }

        .time-block:hover {
            border-color: #1890ff;
        }

        .time-block.low {
            background: #f6ffed;
            border-color: #b7eb8f;
            color: #52c41a;
        }

        .time-block.normal {
            background: #fffbe6;
            border-color: #ffe58f;
            color: #faad14;
        }

        .time-block.high {
            background: #fff2f0;
            border-color: #ffccc7;
            color: #ff4d4f;
        }

        /* ä»·æ ¼è®¾ç½®æ ·å¼ */
        .price-setting {
            border-radius: 6px;
            overflow: hidden;
        }
    </style>

    <script src="js/common.js"></script>
    <script>
        // è®¾ç½®ç®¡ç†åŠŸèƒ½
        const SettingsManager = {
            // åˆå§‹åŒ–
            init: function() {
                this.bindEvents();
            },

            // ç»‘å®šäº‹ä»¶
            bindEvents: function() {
                // å·¥ä½œæ¨¡å¼é€‰æ‹©
                const modeCards = document.querySelectorAll('.mode-card');
                modeCards.forEach(card => {
                    card.addEventListener('click', function() {
                        modeCards.forEach(c => c.classList.remove('active'));
                        this.classList.add('active');
                        
                        const mode = this.dataset.mode;
                        DataManager.showNotification(`å·¥ä½œæ¨¡å¼å·²åˆ‡æ¢åˆ°: ${this.querySelector('.mode-title').textContent}`, 'success');
                    });
                });

                // å……ç”µæ¨¡å¼é€‰æ‹©
                const chargingModeBtns = document.querySelectorAll('.charging-mode-btn');
                chargingModeBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        chargingModeBtns.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        
                        DataManager.showNotification(`å……ç”µæ¨¡å¼å·²åˆ‡æ¢åˆ°: ${this.textContent}`, 'success');
                    });
                });

                // æ—¶é—´æ®µè®¾ç½®æŒ‰é’®
                const timePeriodBtns = document.querySelectorAll('.time-period-btn');
                timePeriodBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        timePeriodBtns.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        
                        const period = this.dataset.period;
                        DataManager.showNotification(`å·²é€‰æ‹©è®¾ç½®${this.textContent.replace('è®¾ç½®', '').replace('æ—¶é—´æ®µ', '')}`, 'info');
                    });
                });

                // æ—¶é—´å—ç‚¹å‡»
                const timeBlocks = document.querySelectorAll('.time-block');
                timeBlocks.forEach(block => {
                    block.addEventListener('click', function() {
                        const activePeriod = document.querySelector('.time-period-btn.active').dataset.period;
                        const hour = this.dataset.hour;
                        
                        // ç§»é™¤å…¶ä»–æ ·å¼ç±»
                        this.classList.remove('low', 'normal', 'high');
                        
                        // æ·»åŠ å¯¹åº”çš„æ ·å¼ç±»
                        this.classList.add(activePeriod);
                        
                        DataManager.showNotification(`æ—¶é—´æ®µ ${hour}:00 å·²è®¾ç½®ä¸º${activePeriod === 'high' ? 'é«˜ç”µä»·' : activePeriod === 'normal' ? 'å¹³ç”µä»·' : 'ä½ç”µä»·'}`, 'success');
                    });
                });

                // å¤‡ä»½æ»‘å—
                const backupSlider = document.getElementById('backupSlider');
                backupSlider.addEventListener('input', function() {
                    const value = this.value;
                    const backupPercent = document.querySelector('.data-panel:nth-of-type(3) .panel-content div:nth-of-type(2) div:first-child div:first-child');
                    const selfPercent = document.querySelector('.data-panel:nth-of-type(3) .panel-content div:nth-of-type(2) div:first-child div:last-child');
                    
                    if (backupPercent) backupPercent.textContent = value + '%';
                    if (selfPercent) selfPercent.textContent = (100 - value) + '%';
                });
            }
        };

        // è°ƒæ•´è¾“å…¥ç”µæµ
        function adjustInputCurrent(delta) {
            const input = document.getElementById('inputCurrent');
            const currentValue = parseInt(input.value);
            const newValue = Math.max(6, Math.min(32, currentValue + delta));
            input.value = newValue;
            DataManager.showNotification(`å®¶åº­æœ€å¤§è¾“å…¥ç”µæµå·²è°ƒæ•´ä¸º: ${newValue}A`, 'success');
        }

        // è°ƒæ•´ç”µæ± ç”µæµ
        function adjustBatteryCurrent(delta) {
            const input = document.getElementById('batteryCurrent');
            const currentValue = parseInt(input.value);
            const newValue = Math.max(5, Math.min(100, currentValue + delta));
            input.value = newValue;
            DataManager.showNotification(`ç”µæ± å……ç”µç”µæµå·²è°ƒæ•´ä¸º: ${newValue}A`, 'success');
        }

        // è°ƒæ•´å……ç”µåŠŸç‡
        function adjustChargingPower(delta) {
            const input = document.getElementById('chargingPower');
            const currentValue = parseInt(input.value);
            const newValue = Math.max(6000, Math.min(30000, currentValue + delta));
            input.value = newValue;
            DataManager.showNotification(`æœ€å¤§å……ç”µåŠŸç‡å·²è°ƒæ•´ä¸º: ${newValue}W`, 'success');
        }

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            SettingsManager.init();
        });
    </script>
    <script src="js/settings.js"></script>
</body>
</html>
