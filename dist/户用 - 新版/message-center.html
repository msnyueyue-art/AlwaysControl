<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¶ˆæ¯ä¸­å¿ƒ - æˆ·ç”¨å®¶åº­å‚¨èƒ½-èƒ½æºç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="header">
        <div class="logo">Always Control Technology</div>
        <div class="header-center">
            <div class="date-display">2025/09/23</div>
            <select class="language-selector">
                <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                <option value="en-US">English</option>
            </select>
        </div>
        <div class="header-actions">
            <div class="action-item">
                <div class="action-icon">+</div>
                <div class="action-text">æ·»åŠ è®¾å¤‡</div>
            </div>
            <div class="action-item">
                <div class="action-icon">ğŸ””</div>
                <div class="action-text">ä¿¡æ¯é€šçŸ¥</div>
            </div>
            <div class="action-item">
                <div class="action-icon">ğŸ“–</div>
                <div class="action-text">æ–°æ‰‹æ•™ç¨‹</div>
            </div>
        </div>
    </header>

    <!-- ä¾§è¾¹æ  -->
    <nav class="sidebar">
        <div class="user-profile">
            <div class="user-avatar">ğŸ‘¤</div>
            <div class="user-name">user_demo</div>
        </div>
        <div class="nav-menu">
            <a href="index.html" class="nav-item">
                <div class="nav-icon">ğŸ </div>
                <span>é¦–é¡µ</span>
            </a>
            <a href="historical-data.html" class="nav-item">
                <div class="nav-icon">ğŸ“Š</div>
                <span>å†å²æ•°æ®</span>
            </a>
            <a href="message-center.html" class="nav-item active">
                <div class="nav-icon">ğŸ””</div>
                <span>æ¶ˆæ¯ä¸­å¿ƒ</span>
            </a>
            <a href="help-support.html" class="nav-item">
                <div class="nav-icon">â“</div>
                <span>å¸®åŠ©ä¸æ”¯æŒ</span>
            </a>
            <a href="device-management.html" class="nav-item">
                <div class="nav-icon">ğŸ¢</div>
                <span>è®¾å¤‡ç®¡ç†</span>
            </a>
            <a href="settings.html" class="nav-item">
                <div class="nav-icon">âš™ï¸</div>
                <span>è®¾ç½®</span>
            </a>
        </div>
        <div class="version-info">
            <span>ç‰ˆæœ¬å· 1.0.12</span>
            <span>â–¼</span>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
        <!-- æ¶ˆæ¯ä¸­å¿ƒæ ‡é¢˜ -->
        <div class="data-panel">
            <h1 style="font-size: 24px; font-weight: 600; color: #333; margin-bottom: 20px;">æ¶ˆæ¯ä¸­å¿ƒ</h1>
            
            <!-- æ“ä½œæŒ‰é’® -->
            <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                <button class="btn btn-primary" id="markAllReadBtn">æ ‡è®°å·²è¯»</button>
                <button class="btn btn-danger" id="deleteBtn">åˆ é™¤</button>
            </div>

            <!-- æ¶ˆæ¯è¡¨æ ¼ -->
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                <input type="checkbox" id="selectAll" style="margin-right: 8px;">
                            </th>
                            <th>é€šçŸ¥æ ‡é¢˜</th>
                            <th>é€šçŸ¥å†…å®¹</th>
                            <th>æ—¶é—´</th>
                            <th>ç±»å‹</th>
                            <th>çŠ¶æ€</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="messageTableBody">
                        <!-- æ¶ˆæ¯æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </tbody>
                </table>
            </div>

            <!-- åˆ†é¡µ -->
            <div class="pagination">
                <button onclick="previousPage()" id="prevBtn">â€¹</button>
                <button onclick="goToPage(1)" class="active" id="page1">1</button>
                <button onclick="goToPage(2)" id="page2">2</button>
                <button onclick="goToPage(3)" id="page3">3</button>
                <button onclick="goToPage(4)" id="page4">4</button>
                <button onclick="goToPage(5)" id="page5">5</button>
                <span>...</span>
                <button onclick="goToPage(14)" id="page14">14</button>
                <button onclick="nextPage()" id="nextBtn">â€º</button>
            </div>
            
            <!-- åˆ†é¡µä¿¡æ¯ -->
            <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 20px; font-size: 14px; color: #666;">
                <span>ç¬¬ 1-10 æ¡/æ€»å…± 140 æ¡</span>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <span>10æ¡/é¡µ</span>
                    <select style="padding: 4px 8px; border: 1px solid #d9d9d9; border-radius: 4px;">
                        <option>10</option>
                        <option>20</option>
                        <option>50</option>
                    </select>
                </div>
            </div>
        </div>
    </main>

    <script src="js/common.js"></script>
    <script>
        // æ¶ˆæ¯ç®¡ç†
        const MessageManager = {
            currentPage: 1,
            totalPages: 14,
            messagesPerPage: 10,
            
            // æ¨¡æ‹Ÿæ¶ˆæ¯æ•°æ®
            messages: [
                {
                    id: 1,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-22 07:50:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 2,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-22 07:45:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 3,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-21 07:50:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 4,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-21 07:45:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 5,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-20 07:50:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 6,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-20 07:45:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 7,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-19 07:50:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 8,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-19 07:45:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 9,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-18 07:50:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 10,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-18 07:45:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 11,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-17 07:50:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 12,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-17 07:45:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 13,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-16 07:50:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 14,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-16 07:45:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 15,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-15 07:50:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 16,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-15 07:45:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 17,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-14 07:50:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 18,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-14 07:45:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 19,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-13 07:50:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                },
                {
                    id: 20,
                    title: "ç”µæ± é€šçŸ¥",
                    content: "æ‚¨çš„ç”µæ± æ­£åœ¨å……ç”µ",
                    time: "2025-09-13 07:45:00",
                    type: "ç”µæ± é€šçŸ¥",
                    status: "unread"
                }
            ],

            // åˆå§‹åŒ–
            init: function() {
                this.renderMessages();
                this.bindEvents();
            },

            // æ¸²æŸ“æ¶ˆæ¯åˆ—è¡¨
            renderMessages: function() {
                const tbody = document.getElementById('messageTableBody');
                const startIndex = (this.currentPage - 1) * this.messagesPerPage;
                const endIndex = startIndex + this.messagesPerPage;
                const pageMessages = this.messages.slice(startIndex, endIndex);

                tbody.innerHTML = '';

                pageMessages.forEach(message => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>
                            <input type="checkbox" class="message-checkbox" data-id="${message.id}">
                        </td>
                        <td>${message.title}</td>
                        <td>${message.content}</td>
                        <td>${message.time}</td>
                        <td>${message.type}</td>
                        <td>
                            <span class="status-indicator ${message.status === 'unread' ? 'status-offline' : 'status-online'}">
                                <span class="status-dot"></span>
                                ${message.status === 'unread' ? 'æœªè¯»' : 'å·²è¯»'}
                            </span>
                        </td>
                        <td>
                            <button class="btn btn-primary" onclick="MessageManager.markAsRead(${message.id})" style="padding: 4px 8px; font-size: 12px;">
                                æ ‡è®°å·²è¯»
                            </button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });

                this.updatePaginationInfo();
            },

            // æ›´æ–°åˆ†é¡µä¿¡æ¯
            updatePaginationInfo: function() {
                const startItem = (this.currentPage - 1) * this.messagesPerPage + 1;
                const endItem = Math.min(this.currentPage * this.messagesPerPage, this.messages.length);
                
                const paginationInfo = document.querySelector('.pagination').nextElementSibling;
                if (paginationInfo) {
                    paginationInfo.innerHTML = `
                        <span>ç¬¬ ${startItem}-${endItem} æ¡/æ€»å…± ${this.messages.length} æ¡</span>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span>10æ¡/é¡µ</span>
                            <select style="padding: 4px 8px; border: 1px solid #d9d9d9; border-radius: 4px;">
                                <option>10</option>
                                <option>20</option>
                                <option>50</option>
                            </select>
                        </div>
                    `;
                }
            },

            // ç»‘å®šäº‹ä»¶
            bindEvents: function() {
                // å…¨é€‰/å–æ¶ˆå…¨é€‰
                document.getElementById('selectAll').addEventListener('change', (e) => {
                    const checkboxes = document.querySelectorAll('.message-checkbox');
                    checkboxes.forEach(checkbox => {
                        checkbox.checked = e.target.checked;
                    });
                });

                // æ ‡è®°å…¨éƒ¨å·²è¯»
                document.getElementById('markAllReadBtn').addEventListener('click', () => {
                    this.markAllAsRead();
                });

                // åˆ é™¤é€‰ä¸­
                document.getElementById('deleteBtn').addEventListener('click', () => {
                    this.deleteSelected();
                });
            },

            // æ ‡è®°ä¸ºå·²è¯»
            markAsRead: function(messageId) {
                const message = this.messages.find(m => m.id === messageId);
                if (message) {
                    message.status = 'read';
                    this.renderMessages();
                    DataManager.showNotification('æ¶ˆæ¯å·²æ ‡è®°ä¸ºå·²è¯»', 'success');
                }
            },

            // æ ‡è®°å…¨éƒ¨å·²è¯»
            markAllAsRead: function() {
                this.messages.forEach(message => {
                    message.status = 'read';
                });
                this.renderMessages();
                DataManager.showNotification('æ‰€æœ‰æ¶ˆæ¯å·²æ ‡è®°ä¸ºå·²è¯»', 'success');
            },

            // åˆ é™¤é€‰ä¸­çš„æ¶ˆæ¯
            deleteSelected: function() {
                const selectedCheckboxes = document.querySelectorAll('.message-checkbox:checked');
                const selectedIds = Array.from(selectedCheckboxes).map(cb => parseInt(cb.dataset.id));
                
                if (selectedIds.length === 0) {
                    DataManager.showNotification('è¯·é€‰æ‹©è¦åˆ é™¤çš„æ¶ˆæ¯', 'warning');
                    return;
                }

                if (confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${selectedIds.length} æ¡æ¶ˆæ¯å—ï¼Ÿ`)) {
                    this.messages = this.messages.filter(message => !selectedIds.includes(message.id));
                    this.renderMessages();
                    DataManager.showNotification(`å·²åˆ é™¤ ${selectedIds.length} æ¡æ¶ˆæ¯`, 'success');
                }
            }
        };

        // åˆ†é¡µå‡½æ•°
        function goToPage(page) {
            if (page >= 1 && page <= MessageManager.totalPages) {
                MessageManager.currentPage = page;
                MessageManager.renderMessages();
                updatePaginationButtons();
            }
        }

        function previousPage() {
            if (MessageManager.currentPage > 1) {
                goToPage(MessageManager.currentPage - 1);
            }
        }

        function nextPage() {
            if (MessageManager.currentPage < MessageManager.totalPages) {
                goToPage(MessageManager.currentPage + 1);
            }
        }

        function updatePaginationButtons() {
            // æ›´æ–°åˆ†é¡µæŒ‰é’®çŠ¶æ€
            for (let i = 1; i <= 5; i++) {
                const btn = document.getElementById(`page${i}`);
                if (btn) {
                    btn.classList.toggle('active', MessageManager.currentPage === i);
                }
            }
            
            // æ›´æ–°å‰åæŒ‰é’®çŠ¶æ€
            document.getElementById('prevBtn').disabled = MessageManager.currentPage === 1;
            document.getElementById('nextBtn').disabled = MessageManager.currentPage === MessageManager.totalPages;
        }

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            MessageManager.init();
        });
    </script>
</body>
</html>
