<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>用户管理 - 电动汽车充电站管理系统</title>
  <link rel="icon" href="../充电站/logo.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { primary: '#007AFF', success:'#10b981', warning:'#f59e0b', danger:'#ef4444', muted:'#6b7280' },
          boxShadow: { card: '0 2px 8px rgba(0,0,0,0.08)' },
          borderRadius: { card: '16px' }
        }
      }
    }
  </script>
  <style>
    body{background:#F8F9FA}
    .fixed-header{position:fixed;top:0;left:0;right:0;z-index:40}
    .fixed-sidebar{position:fixed;top:64px;bottom:0;left:0;width:220px;border-right:1px solid #e5e7eb;background:#fff;z-index:30}
    .page-wrap{padding-top:64px;padding-left:220px}
    @media (max-width: 1024px){.fixed-sidebar{display:none}.page-wrap{padding-left:0}}
  </style>
</head>
<body>
  <header class="fixed-header bg-white border-b border-gray-200">
    <div class="max-w-screen-2xl mx-auto px-4 lg:px-6 h-16 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <a href="index.html" class="text-gray-700 hover:text-gray-900">首页</a>
        <span class="text-gray-300">/</span>
        <span class="font-semibold">用户管理</span>
      </div>
      <div class="flex items-center gap-3">
        <button id="langToggle" class="px-3 py-2 text-sm text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg">EN/中文</button>
        <button id="themeToggle" class="px-3 py-2 text-sm text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg">切换主题</button>
        <div class="flex items-center gap-2">
          <span class="text-sm text-gray-600">管理员</span>
          <button id="logoutBtn" class="px-3 py-2 text-sm text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg">退出登录</button>
        </div>
      </div>
    </div>
  </header>

  <aside class="fixed-sidebar hidden lg:block">
    <nav class="p-3">
      <a class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50" href="index.html">首页</a>
      <a class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50" href="sites.html">站点管理</a>
      <a class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50" href="piles.html">充电桩管理</a>
      <a class="block px-3 py-2 rounded-lg bg-blue-50 text-primary" href="users.html">用户管理</a>
      <a class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50" href="orders.html">充电订单管理</a>
      <a class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50" href="analytics.html">数据分析</a>
      <a class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50" href="alerts.html">告警管理</a>
      <div class="mt-2 text-xs text-gray-500 px-3">系统管理</div>
      <a class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50" href="index.html#/system/menus">菜单管理</a>
      <a class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50" href="index.html#/system/roles">角色管理</a>
      <a class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50" href="index.html#/system/users">人员管理</a>
      <a class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50" href="index.html#/system/logs">日志管理</a>
    </nav>
  </aside>

  <main id="root" class="page-wrap"></main>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script>
    const { useMemo, useState, useEffect } = React

    // 假数据
    const MOCK_USERS = Array.from({length: 56}).map((_,i)=>({
      id: 1000 + i,
      username: 'user_' + (1000 + i),
      phone: '138' + String(10000000 + i).slice(0,8),
      createdAt: '2024-0' + (1 + (i%9)) + '-' + String(1 + (i%28)).padStart(2,'0') + ' 10:00:00',
      status: i%3===0 ? '禁用' : (i%3===1 ? '正常' : '待验证')
    }))

    const Tag = ({ color, text }) => (
      React.createElement('span', { className:'px-2 py-0.5 rounded text-xs text-white', style:{background:color}}, text)
    )

    function SearchCard({ onQuery, onReset }){
      const [username, setUsername] = useState('')
      const [phone, setPhone] = useState('')
      return (
        React.createElement('div', { className:'bg-white shadow-card rounded-card border border-gray-200 p-4 mb-4' },
          React.createElement('div', { className:'flex items-end justify-between gap-4 flex-wrap' },
            React.createElement('div', { className:'flex-1 grid grid-cols-1 md:grid-cols-2 gap-4' },
              React.createElement('div', null,
                React.createElement('label', { className:'block text-sm text-gray-600 mb-2' }, '用户名'),
                React.createElement('input', { className:'w-52 h-9 border border-gray-300 rounded-lg px-3', placeholder:'请输入用户名', value:username, onChange:e=>setUsername(e.target.value) })
              ),
              React.createElement('div', null,
                React.createElement('label', { className:'block text-sm text-gray-600 mb-2' }, '手机号'),
                React.createElement('input', { className:'w-52 h-9 border border-gray-300 rounded-lg px-3', placeholder:'请输入手机号', value:phone, onChange:e=>setPhone(e.target.value) })
              )
            ),
            React.createElement('div', { className:'flex items-center gap-2' },
              React.createElement('button', { className:'w-20 h-9 bg-primary text-white rounded-lg', onClick:()=>onQuery({username, phone}) }, '查询'),
              React.createElement('button', { className:'w-20 h-9 bg-gray-500 text-white rounded-lg', onClick:()=>{setUsername('');setPhone('');onReset()} }, '重置')
            )
          )
        )
      )
    }

    function TableCard({ data, onDetail }){
      return (
        React.createElement('div', { className:'bg-white shadow-card rounded-card border border-gray-200 overflow-hidden' },
          React.createElement('div', { className:'bg-gray-100 px-6 py-4 grid grid-cols-5 text-[16px] font-medium' },
            React.createElement('div', null, '用户ID'),
            React.createElement('div', null, '用户名'),
            React.createElement('div', null, '手机号'),
            React.createElement('div', null, '注册时间'),
            React.createElement('div', null, '操作')
          ),
          React.createElement('div', { className:'divide-y' }, data.map(user => (
            React.createElement('div', { key:user.id, className:'grid grid-cols-5 items-center px-6 h-14 text-center' },
              React.createElement('div', { className:'text-sm text-gray-900' }, user.id),
              React.createElement('div', { className:'text-sm' }, user.username),
              React.createElement('div', { className:'text-sm' }, user.phone),
              React.createElement('div', { className:'text-sm' }, user.createdAt),
              React.createElement('div', null, React.createElement('button', { className:'px-3 py-1 text-sm bg-primary text-white rounded-lg', onClick:()=>onDetail(user) }, '查看详情'))
            )
          )))
        )
      )
    }

    function Pagination({ total, page, pageSize, onChange }){
      const totalPages = Math.max(1, Math.ceil(total / pageSize))
      const pages = []
      for(let i=1;i<=totalPages;i++) pages.push(i)
      return (
        React.createElement('div', { className:'flex items-center justify-between bg-white shadow-card rounded-card border border-gray-200 p-3 mt-4' },
          React.createElement('div', { className:'text-sm text-muted' }, `共 ${total} 条记录`),
          React.createElement('div', { className:'flex items-center gap-2' },
            React.createElement('button', { className:'px-3 h-9 border rounded-lg text-sm', disabled:page===1, onClick:()=>onChange(page-1) }, '上一页'),
            pages.slice(Math.max(0,page-3), Math.max(0,page-3)+5).map(p => (
              React.createElement('button', { key:p, className:`px-3 h-9 rounded-lg text-sm ${p===page?'bg-primary text-white':'border'}`, onClick:()=>onChange(p) }, p)
            )),
            React.createElement('button', { className:'px-3 h-9 border rounded-lg text-sm', disabled:page===totalPages, onClick:()=>onChange(page+1) }, '下一页')
          )
        )
      )
    }

    function App(){
      const [query, setQuery] = useState({})
      const [page, setPage] = useState(1)
      const pageSize = 10

      const filtered = useMemo(()=>{
        let list = MOCK_USERS
        if(query.username) list = list.filter(u=>u.username.includes(query.username))
        if(query.phone) list = list.filter(u=>u.phone.includes(query.phone))
        return list
      }, [query])

      const pageData = useMemo(()=>{
        const start = (page-1)*pageSize
        return filtered.slice(start, start+pageSize)
      }, [filtered, page])

      useEffect(()=>{ setPage(1) }, [query])

      return (
        React.createElement('div', { className:'max-w-screen-2xl mx-auto p-4 lg:p-6' },
          React.createElement(SearchCard, { onQuery:setQuery, onReset:()=>setQuery({}) }),
          React.createElement(TableCard, { data:pageData, onDetail:(u)=>alert('查看详情: '+u.username) }),
          React.createElement(Pagination, { total:filtered.length, page, pageSize, onChange:setPage })
        )
      )
    }

    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App))
    
    // Header button events
    document.getElementById('langToggle').addEventListener('click', ()=>{
      const isEn = document.documentElement.getAttribute('lang') === 'en'
      document.documentElement.setAttribute('lang', isEn ? 'zh-CN' : 'en')
    });
    
    document.getElementById('themeToggle').addEventListener('click', ()=>{
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark'
      document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark')
    });
    
    document.getElementById('logoutBtn').addEventListener('click', ()=>{
      if(confirm('确定要退出登录吗？')) {
        alert('已退出登录')
        // window.location.href = 'login.html'
      }
    });
  </script>
</body>
</html>


