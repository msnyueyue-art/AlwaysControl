:root{--primary-color:#007AFF;--primary-hover:#0056CC;--success:#10b981;--warning:#f59e0b;--error:#ef4444;--info:#3b82f6;--bg:#F8F9FA;--bg-card:#ffffff;--text:#111827;--muted:#6b7280;--border:#e5e7eb;--radius:16px;--shadow:0 2px 8px rgba(0,0,0,0.1);--shadow-lg:0 10px 15px -3px rgba(0,0,0,.1)}
[data-theme="dark"]{--bg:#0f172a;--bg-card:#1e293b;--text:#f9fafb;--muted:#9ca3af;--border:#334155;--shadow:0 2px 8px rgba(0,0,0,0.3);--shadow-lg:0 10px 15px -3px rgba(0,0,0,.3)}
*{box-sizing:border-box}
html,body,#app{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.6 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial}
.app{display:flex;height:100%}
.sidebar{width:200px;background:var(--bg-card);border-right:1px solid var(--border);color:var(--text);display:flex;flex-direction:column;position:fixed;left:0;top:0;bottom:0;z-index:100;overflow-y:auto}
.sidebar .brand{padding:16px 20px;font-weight:700;color:var(--text);display:flex;align-items:center;justify-content:center}
.brand-logo{height:32px;object-fit:contain}
.menu{display:flex;flex-direction:column;gap:4px;padding:8px}
.menu .menu-group{padding:8px 10px;font-size:12px;color:var(--muted);text-transform:uppercase}
.menu-item{padding:12px 14px;border-radius:10px;text-decoration:none;color:var(--muted);cursor:pointer}
.menu-item:hover{background:rgba(53,98,227,.06);color:var(--primary-color)}
.menu-item.active{background:rgba(53,98,227,.1);color:var(--primary-color)}
.menu-item-toggle{display:flex;align-items:center;justify-content:space-between}
.submenu-arrow{transition:transform 0.2s ease;stroke:var(--muted)}
.menu-item-toggle:hover .submenu-arrow{stroke:var(--primary-color)}
.submenu{display:none;flex-direction:column;margin:4px 0 8px 0;overflow:hidden;transition:all 0.3s ease}
.submenu.show{display:flex}
.submenu.show ~ .menu-item-toggle .submenu-arrow{transform:rotate(90deg)}
.submenu .menu-item{padding-left:32px}
.sidebar-footer{margin-top:auto;padding:8px}
.btn{background:var(--primary-color);border:none;color:#fff;border-radius:8px;padding:8px 12px;cursor:pointer}
.btn-ghost{background:transparent;color:var(--muted);border:1px solid var(--border)}
.main{flex:1;display:flex;flex-direction:column;min-width:0;margin-left:200px}
.header{display:flex;align-items:center;justify-content:space-between;padding:12px 20px;background:var(--bg-card);box-shadow:var(--shadow);position:sticky;top:0;z-index:10;height:64px}
.header .left{display:flex;align-items:center;gap:16px}
.header .right{display:flex;align-items:center;gap:12px}
.page-title{margin:0;font-size:20px;font-weight:600;color:var(--text)}
.select{padding:6px 10px;border-radius:8px;border:1px solid var(--border);background:var(--bg-card);color:var(--text)}
.view{padding:16px;display:grid;gap:16px;grid-template-columns:1fr 1fr;grid-template-rows:auto minmax(0,1fr) minmax(280px,auto)}
.cards{display:contents}
.card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;display:flex;flex-direction:column}
.card-title{font-size:16px;font-weight:600;margin-bottom:12px;color:var(--text);flex-shrink:0}
.ranking-card .card-title{margin-bottom:10px}
.overview-card{grid-column:1/-1;grid-row:1}
.stats-card{grid-column:1;grid-row:2;min-height:0}
.map-card{grid-column:2;grid-row:2;min-height:0}
.monitor-card{grid-column:1;grid-row:3;min-height:0;max-height:320px}
.ranking-card{grid-column:2;grid-row:3;min-height:0;max-height:320px}
.kpi{display:flex;gap:20px;justify-content:space-between}
.kpi-item{flex:1;text-align:center}
.kpi-item .label{color:var(--muted);font-size:14px;margin-bottom:8px}
.kpi-item .value{font-size:24px;font-weight:700;color:var(--primary-color)}
.stats-grid{display:grid;grid-template-columns:repeat(3,minmax(140px,160px));gap:12px;justify-content:center;margin-top:16px;flex:1;align-content:start}
.stat-item{width:160px;height:80px;background:var(--bg);border:1px solid var(--border);border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex-shrink:0}
.stat-item .label{font-size:12px;color:var(--muted);margin-bottom:4px}
.stat-item .value{font-size:16px;font-weight:600;color:var(--text)}
.tab-container{display:flex;gap:6px;margin-bottom:16px}
.tab{padding:5px 10px;border:1px solid var(--border);border-radius:6px;background:var(--bg-card);color:var(--muted);cursor:pointer;font-size:13px;white-space:nowrap}
.tab.active{background:var(--primary-color);color:white;border-color:var(--primary-color)}
.dimension-tabs{display:flex;gap:6px;margin-bottom:16px}
.dimension-tab{padding:5px 10px;border:1px solid var(--border);border-radius:6px;background:var(--bg-card);color:var(--muted);cursor:pointer;font-size:13px;white-space:nowrap}
.dimension-tab.active{background:var(--primary-color);color:white;border-color:var(--primary-color)}
.ranking-filter-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:10px}
.ranking-filter-bar .tab-container{margin-bottom:0}
.ranking-filter-bar .dimension-tabs{margin-bottom:0}
.ranking-list{display:flex;flex-direction:column;gap:6px;flex:1;overflow-y:hidden;min-height:0}
.ranking-item{display:flex;align-items:center;gap:10px;padding:7px 10px;background:var(--bg);border-radius:6px;flex-shrink:0}
.ranking-number{width:20px;height:20px;border-radius:50%;background:var(--primary-color);color:white;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;flex-shrink:0}
.ranking-name{flex:1;font-size:13px;font-weight:500;color:var(--text)}
.ranking-value{font-size:13px;font-weight:600;color:var(--primary-color);text-align:right;flex-shrink:0}
.map-placeholder{flex:1;min-height:300px;background:var(--bg);border-radius:8px;display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:14px}
.flex{display:flex;gap:12px;align-items:center}
.row{display:flex;gap:16px}
.col{flex:1}
.chart{height:300px}
.monitor-content{display:flex;gap:24px;align-items:center;justify-content:center;flex:1}
.gun-chart{width:160px;height:160px;flex-shrink:0}
.gun-legend{display:flex;flex-direction:column;gap:10px}
.legend-item{display:flex;align-items:center;gap:10px;font-size:14px}
.legend-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0}
.legend-label{color:var(--text);flex:1}
.legend-value{font-weight:600;color:var(--text);text-align:right;min-width:40px}
#map{height:480px;border-radius:12px;overflow:hidden}
.grid-6-6{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
.grid-6-6 > .span6{grid-column:span 6}
.grid-4-4-4{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
.grid-4-4-4 > .span4{grid-column:span 4}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:8px 10px;border-bottom:1px solid var(--border)}
.rank-up{color:var(--success)}
.rank-down{color:var(--error)}
.hide-desktop{display:none}
.btn-icon{width:40px;height:40px;border:none;background:transparent;color:var(--text);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;position:relative}
.btn-icon:hover{background:var(--bg);color:var(--primary-color)}
.btn-icon svg{stroke:currentColor}
.brand-header{display:flex;align-items:center;height:40px}
.brand-logo-header{height:32px;object-fit:contain}
.notification-badge{position:absolute;top:6px;right:6px;background:var(--error);color:white;border-radius:10px;padding:2px 6px;font-size:11px;font-weight:600;min-width:18px;text-align:center}
.user-menu{position:relative}
.user-avatar{width:40px;height:40px;border:none;background:var(--primary-color);color:white;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:16px;transition:all 0.2s ease}
.user-avatar:hover{background:var(--primary-hover);transform:scale(1.05)}
.user-dropdown{position:absolute;top:calc(100% + 8px);right:0;background:var(--bg-card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow-lg);min-width:280px;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all 0.2s ease;z-index:1000}
.user-dropdown.show{opacity:1;visibility:visible;transform:translateY(0)}
.user-dropdown-header{padding:16px;display:flex;align-items:center;gap:12px}
.user-avatar-large{width:48px;height:48px;border-radius:50%;background:var(--primary-color);color:white;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:20px;flex-shrink:0}
.user-info{flex:1;min-width:0}
.user-info-name{font-size:15px;font-weight:600;color:var(--text);margin-bottom:4px}
.user-info-email{font-size:13px;color:var(--muted);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.user-dropdown-divider{height:1px;background:var(--border);margin:0 8px}
.user-dropdown-item{width:100%;padding:12px 16px;border:none;background:transparent;color:var(--text);cursor:pointer;display:flex;align-items:center;gap:10px;font-size:14px;transition:background 0.2s ease;text-align:left}
.user-dropdown-item:hover{background:var(--bg)}
.user-dropdown-item svg{flex-shrink:0}
.user-name{font-size:14px;color:var(--muted)}
@media (max-width: 992px){
  .sidebar{left:-220px;transition:left .25s ease}
  .sidebar.open{left:0;box-shadow:2px 0 8px rgba(0,0,0,0.2)}
  .main{margin-left:0}
  .hide-desktop{display:inline-flex}
  .view{grid-template-columns:1fr;grid-template-rows:auto auto auto auto auto}
  .overview-card{grid-column:1;grid-row:1}
  .stats-card{grid-column:1;grid-row:2}
  .map-card{grid-column:1;grid-row:3}
  .monitor-card{grid-column:1;grid-row:4}
  .ranking-card{grid-column:1;grid-row:5}
  .kpi{flex-direction:column;gap:12px}
  .kpi-item{flex:none}
  .stats-grid{grid-template-columns:repeat(2,160px)}
}


